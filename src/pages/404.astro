---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getBaseUrl } from '../lib/getBaseUrl';

const base = getBaseUrl();

---

<BaseLayout title="404: Not Found" includeSidebar={false}>
  <div class="not-found-container">
    <!-- Background particles container -->
    <div id="bg-particles" class="fixed inset-0 pointer-events-none overflow-hidden opacity-10 -z-10"></div>

    <div class="text-center relative z-10">
      <div class="main-logo-container">
        <svg class="main-logo" viewBox="0 0 256 256">
          <path d="M56.106,156.033c0,-35.468 20.862,-93.125 34.214,-109.094c13.029,-15.583 46.9,-14.363 61.263,0c95.023,95.023 34.214,73.626 34.214,109.094c0,35.467 -29.056,64.263 -64.846,64.263c-35.789,0 -64.845,-28.796 -64.845,-64.263Zm94.953,-69.717c3.355,0 6.079,2.724 6.079,6.079c0,3.355 -2.724,6.079 -6.079,6.079c-3.355,0 -6.079,-2.724 -6.079,-6.079c0,-3.355 2.724,-6.079 6.079,-6.079Zm-30.396,-48.585c13.421,0 24.317,3.632 24.317,8.106c0,4.473 -10.896,8.105 -24.317,8.105c-13.421,0 -24.318,-3.632 -24.318,-8.105c0,-4.474 10.897,-8.106 24.318,-8.106Z" />
        </svg>
      </div>
      <h1 class="text-9xl font-bold mb-2 text-accent">404</h1>
      <h3 class="text-2xl mb-2">Looks like this page wandered off.</h3>
      <p class="text-base-content/60 mb-8">Maybe it's out making pottery somewhere.</p>
      <a class="btn btn-accent" href={base}>Take me home</a>
    </div>
  </div>

  <script>
    // SVG template (defined once)
    const SVG_TEMPLATE = `
      <svg viewBox="0 0 256 256" class="particle">
        <path d="M56.106,156.033c0,-35.468 20.862,-93.125 34.214,-109.094c13.029,-15.583 46.9,-14.363 61.263,0c95.023,95.023 34.214,73.626 34.214,109.094c0,35.467 -29.056,64.263 -64.846,64.263c-35.789,0 -64.845,-28.796 -64.845,-64.263Zm94.953,-69.717c3.355,0 6.079,2.724 6.079,6.079c0,3.355 -2.724,6.079 -6.079,6.079c-3.355,0 -6.079,-2.724 -6.079,-6.079c0,-3.355 2.724,-6.079 6.079,-6.079Zm-30.396,-48.585c13.421,0 24.317,3.632 24.317,8.106c0,4.473 -10.896,8.105 -24.317,8.105c-13.421,0 -24.318,-3.632 -24.318,-8.105c0,-4.474 10.897,-8.106 24.318,-8.106Z" />
      </svg>
    `;

    // Generate 3 particles instead of 12 (still looks good)
    const container = document.getElementById('bg-particles');
    if (container) {
      for (let i = 0; i < 3; i++) {
        const particle = document.createElement('div');
        particle.innerHTML = SVG_TEMPLATE;
        const svg = particle.firstElementChild;
        if (svg) {
          svg.style.left = `${Math.random() * 100}%`;
          svg.style.top = `${Math.random() * 100}%`;
          svg.style.transform = `rotate(${Math.random() * 360}deg)`;
          container.appendChild(svg);
        }
      }
    }
  </script>
</BaseLayout>

<style>
  .not-found-container {
    position: relative;
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .particle {
    position: absolute;
    width: 80px;
    height: 80px;
    fill: #C0A36E;
    fill-rule: evenodd;
    opacity: 0.3;
  }

  .main-logo-container {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .main-logo {
    width: 120px;
    height: 120px;
    fill: #C0A36E;
    fill-rule: evenodd;
    stroke: #C0A36E;
    stroke-width: 1px;
    animation: pulse-glow 3s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% {
      transform: scale(1);
      filter: drop-shadow(0 0 10px rgba(192, 163, 110, 0.3));
    }
    50% {
      transform: scale(1.05);
      filter: drop-shadow(0 0 20px rgba(192, 163, 110, 0.6));
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .particle {
      animation: none;
    }
    .main-logo {
      animation: none;
    }
  }
</style>
